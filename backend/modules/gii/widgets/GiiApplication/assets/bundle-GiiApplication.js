(window.webpackJsonp=window.webpackJsonp||[]).push([["GiiApplication"],{"../../../../../ui/form/FieldList/FieldListView.scss":function(e,t,a){},"./GiiApplication.js":function(e,t,a){"use strict";a.r(t);var n=a("./node_modules/@babel/runtime/helpers/objectSpread.js"),s=a.n(n),r=a("./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=a.n(r),o=a("./node_modules/@babel/runtime/helpers/createClass.js"),l=a.n(o),u=a("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),c=a.n(u),p=a("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),m=a.n(p),d=a("./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),h=a.n(d),b=a("./node_modules/@babel/runtime/helpers/inherits.js"),f=a.n(b),y=a("./node_modules/@babel/runtime/helpers/defineProperty.js"),v=a.n(y),g=a("./node_modules/react/index.js"),_=a.n(g),E=a("./node_modules/prop-types/index.js"),C=a.n(E),w=a("./node_modules/react-redux/es/index.js"),j=a("../../../../../ui/nav/Nav/index.js"),N=a("./node_modules/@babel/runtime/helpers/extends.js"),k=a.n(N),x=a("./node_modules/warning/warning.js"),O=a.n(x),I=a("./node_modules/invariant/browser.js"),F=a.n(I),T=a("./node_modules/react-router/es/matchPath.js");var P=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){F()(this.context.router,"You should not use <Switch> outside a <Router>")},t.prototype.componentWillReceiveProps=function(e){O()(!(e.location&&!this.props.location),'<Switch> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),O()(!(!e.location&&this.props.location),'<Switch> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.')},t.prototype.render=function(){var e=this.context.router.route,t=this.props.children,a=this.props.location||e.location,n=void 0,s=void 0;return _.a.Children.forEach(t,function(t){if(null==n&&_.a.isValidElement(t)){var r=t.props,i=r.path,o=r.exact,l=r.strict,u=r.sensitive,c=r.from,p=i||c;s=t,n=Object(T.a)(a.pathname,{path:p,exact:o,strict:l,sensitive:u},e.match)}}),n?_.a.cloneElement(s,{location:a,computedMatch:n}):null},t}(_.a.Component);P.contextTypes={router:C.a.shape({route:C.a.object.isRequired}).isRequired},P.propTypes={children:C.a.node,location:C.a.object};var R=P,A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};function V(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var M=function(e){return 0===_.a.Children.count(e)},S=function(e){function t(){var a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var s=arguments.length,r=Array(s),i=0;i<s;i++)r[i]=arguments[i];return a=n=V(this,e.call.apply(e,[this].concat(r))),n.state={match:n.computeMatch(n.props,n.context.router)},V(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getChildContext=function(){return{router:A({},this.context.router,{route:{location:this.props.location||this.context.router.route.location,match:this.state.match}})}},t.prototype.computeMatch=function(e,t){var a=e.computedMatch,n=e.location,s=e.path,r=e.strict,i=e.exact,o=e.sensitive;if(a)return a;F()(t,"You should not use <Route> or withRouter() outside a <Router>");var l=t.route,u=(n||l.location).pathname;return Object(T.a)(u,{path:s,strict:r,exact:i,sensitive:o},l.match)},t.prototype.componentWillMount=function(){O()(!(this.props.component&&this.props.render),"You should not use <Route component> and <Route render> in the same route; <Route render> will be ignored"),O()(!(this.props.component&&this.props.children&&!M(this.props.children)),"You should not use <Route component> and <Route children> in the same route; <Route children> will be ignored"),O()(!(this.props.render&&this.props.children&&!M(this.props.children)),"You should not use <Route render> and <Route children> in the same route; <Route children> will be ignored")},t.prototype.componentWillReceiveProps=function(e,t){O()(!(e.location&&!this.props.location),'<Route> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),O()(!(!e.location&&this.props.location),'<Route> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.'),this.setState({match:this.computeMatch(e,t.router)})},t.prototype.render=function(){var e=this.state.match,t=this.props,a=t.children,n=t.component,s=t.render,r=this.context.router,i=r.history,o=r.route,l=r.staticContext,u={match:e,location:this.props.location||o.location,history:i,staticContext:l};return n?e?_.a.createElement(n,u):null:s?e?s(u):null:"function"==typeof a?a(u):a&&!M(a)?_.a.Children.only(a):null},t}(_.a.Component);S.propTypes={computedMatch:C.a.object,path:C.a.string,exact:C.a.bool,strict:C.a.bool,sensitive:C.a.bool,component:C.a.func,render:C.a.func,children:C.a.oneOfType([C.a.func,C.a.node]),location:C.a.object},S.contextTypes={router:C.a.shape({history:C.a.object.isRequired,route:C.a.object.isRequired,staticContext:C.a.object})},S.childContextTypes={router:C.a.object.isRequired};var L,D,q,K,W,z,U,G,H,Y,B=S,J=a("./node_modules/react-router-redux/es/index.js"),Q=a("./node_modules/lodash-es/get.js"),$=a("./node_modules/lodash-es/isArray.js"),X=a("./node_modules/lodash-es/isObject.js"),Z=a("../../../../../components/index.js"),ee=a("../../../../../actions/routing.js"),te=a("../../../../../reducers/routing.js"),ae=a("../../../../../reducers/navigation.js"),ne=a("../../../../../actions/navigation.js"),se=function(e){return{isInitialized:Object(ae.isInitialized)(e),route:Object(te.b)(e)}},re=function(e){var t,a,n;return Object(w.b)(se)((n=a=function(t){function a(){var e;return i()(this,a),(e=c()(this,m()(a).apply(this,arguments)))._walkRoutesRecursive=e._walkRoutesRecursive.bind(h()(e)),e}return f()(a,t),l()(a,[{key:"componentWillMount",value:function(){var e=K||(Object($.a)(this.props.routes)?null:this.props.routes);e&&Z.store.dispatch(Object(ne.d)(this._walkRoutesRecursive(s()({id:"root"},e)))),this._initParams(this.props)}},{key:"componentWillReceiveProps",value:function(e){!this.props.route&&e.route&&this._initParams(e)}},{key:"render",value:function(){return Object($.a)(this.props.routes)||this.props.isInitialized?_.a.createElement(e,this.props):null}},{key:"_initParams",value:function(e){e.route&&Z.store.dispatch(Object(ne.c)(e.route.params))}},{key:"_walkRoutesRecursive",value:function(e){var t=this,a=null;return Object($.a)(e.items)?a=e.items.map(this._walkRoutesRecursive):Object(X.a)(e.items)&&(a=Object.keys(e.items).map(function(a){return t._walkRoutesRecursive(s()({},e.items[a],{id:a}))})),s()({},e,{id:e.id,exact:e.exact,path:e.path,label:e.label,title:e.title,isVisible:e.isVisible,component:null,componentProps:null,items:a})}}]),a}(_.a.Component),v()(a,"WrappedComponent",e),v()(a,"displayName",e.displayName||e.name),v()(a,"propTypes",{isInitialized:C.a.bool}),t=n))||t}(L=Object(w.b)(function(e){return{pathname:Object(Q.a)(e,"routing.location.pathname")}})((q=D=function(e){function t(){var e;return i()(this,t),(e=c()(this,m()(t).apply(this,arguments)))._renderItem=e._renderItem.bind(h()(e)),e.state={routes:Object($.a)(e.props.routes)?e.props.routes:t.treeToList(e.props.routes,!0)},e}return f()(t,e),l()(t,null,[{key:"treeToList",value:function(e,a){a&&!e.id&&(e.id="root");var n=e.path?[e]:[];return Object($.a)(e.items)?e.items.forEach(function(e){n=n.concat(t.treeToList(e))}):Object(X.a)(e.items)&&Object.keys(e.items).map(function(a){n=n.concat(t.treeToList(s()({},e.items[a],{id:a})))}),n}}]),l()(t,[{key:"componentWillMount",value:function(){this.props.dispatch(Object(ee.b)(this.state.routes))}},{key:"componentWillReceiveProps",value:function(e){this.props.routes!==e.routes&&this.setState({routes:e.routes}),window.history&&"/"===e.pathname&&location.pathname.match(/\/$/)&&window.history.replaceState({},"",Z.store.history.basename)}},{key:"render",value:function(){var e=this,t=this.props.wrapperView,a=_.a.createElement(R,null,this.state.routes.map(function(t,a){return _.a.createElement(B,k()({key:a,render:function(a){return e._renderItem(t,a)}},t,{component:null}))}),this.props.children);return _.a.createElement(J.a,{history:Z.store.history},t&&_.a.createElement(t,this.props.wrapperProps,a)||a)}},{key:"_renderItem",value:function(e,t){var a=e.component;return _.a.createElement(a,k()({},t,e.componentProps))}}]),t}(_.a.PureComponent),v()(D,"propTypes",{wrapperView:C.a.func,wrapperProps:C.a.object,routes:C.a.oneOfType([C.a.object,C.a.arrayOf(C.a.shape({path:C.a.string,component:C.a.func}))]),pathname:C.a.string}),L=q))||L)||L,ie=a("../../../../../ui/form/Button/index.js"),oe=function(e){function t(){return i()(this,t),c()(this,m()(t).apply(this,arguments))}return f()(t,e),l()(t,[{key:"render",value:function(){return _.a.createElement(ie.a,k()({link:!0},this.props))}}]),t}(_.a.PureComponent),le=Z.html.bem("Breadcrumbs"),ue=(Object(w.b)(function(e,t){return{items:t.items||Object(ae.getBreadcrumbs)(e,t.pageId,t.params)}})((U=z=function(e){function t(){return i()(this,t),c()(this,m()(t).apply(this,arguments))}return f()(t,e),l()(t,[{key:"render",value:function(){var e=this,t=this.props.items;return _.a.createElement("nav",{className:le.block(),"aria-label":"breadcrumb"},_.a.createElement("ol",{className:le(le.element("list"),"breadcrumb")},t.map(function(a,n){var s=t.length===n+1;return _.a.createElement("li",{key:a.id,className:le(le.element("item"),"breadcrumb-item")},a.url&&!s&&_.a.createElement(oe,{to:a.url},a.title),!a.url||s&&_.a.createElement("span",null,e.props.pageTitle||a.title))})))}}]),t}(_.a.PureComponent),v()(z,"propTypes",{items:C.a.arrayOf(C.a.object),params:C.a.string,pageId:C.a.string,pageTitle:C.a.string}),v()(z,"defaultProps",{items:[]}),W=U)),a("../../../../../actions/notifications.js")),ce=a("../../../../../reducers/notifications.js"),pe=Object(w.b)(function(e){return{notifications:Object(ce.b)(e)}})((Y=H=function(e){function t(){return i()(this,t),c()(this,m()(t).apply(this,arguments))}return f()(t,e),l()(t,[{key:"componentWillMount",value:function(){this.props.initialFlashes&&(this.props.dispatch(Object(ue.f)(this.props.initialFlashes)),"scrollRestoration"in history?history.scrollRestoration="manual":setTimeout(function(){return window.scrollTo(0,0)},1e3))}},{key:"render",value:function(){var e=this,t=this.props.view||Z.ui.getView("layout.NotificationsView"),a=this.props.itemView||Z.ui.getView("layout.NotificationsItemView");return _.a.createElement(t,this.props,this.props.notifications.map(function(t){return _.a.createElement(a,k()({},t,{key:t.id,onClosing:e._onClosing.bind(e,t.id),onClose:e._onClose.bind(e,t.id)}))}))}},{key:"_onClosing",value:function(e){this.props.dispatch(Object(ue.e)(e))}},{key:"_onClose",value:function(e){this.props.dispatch(Object(ue.d)(e))}}]),t}(_.a.PureComponent),v()(H,"propTypes",{initialFlashes:C.a.object,notifications:C.a.arrayOf(C.a.shape({id:C.a.number,level:C.a.oneOf(["primary","secondary","success","danger","warning","info","light","dark"]),message:C.a.string,isClosing:C.a.bool})),className:C.a.string,view:C.a.func,itemView:C.a.func}),G=Y))||G,me=a("./node_modules/lodash/orderBy.js"),de=a.n(me),he=a("./node_modules/lodash/values.js"),be=a.n(he),fe=a("./node_modules/@babel/runtime/helpers/slicedToArray.js"),ye=a.n(fe),ve=function(){function e(){i()(this,e)}return l()(e,null,[{key:"getLabels",value:function(){return{}}},{key:"getKeys",value:function(){return Object.keys(this.getLabels())}},{key:"getLabel",value:function(e){return this.getLabels()[e]||""}},{key:"getCssClasses",value:function(){return{}}},{key:"getCssClass",value:function(e){return this.getCssClasses()[e]||""}},{key:"getDropdownItems",value:function(){return Object.entries(this.getLabels()).map(function(e){var t=ye()(e,2),a=t[0];return{label:t[1],id:a}})}}]),e}(),ge=function(e){function t(){return i()(this,t),c()(this,m()(t).apply(this,arguments))}return f()(t,e),l()(t,null,[{key:"getLabels",value:function(){var e;return e={},v()(e,this.MODEL,__("Model ActiveRecord")),v()(e,this.FORM,__("Model Form")),v()(e,this.ENUM,__("Enum")),v()(e,this.CRUD,__("Crud Controller")),v()(e,this.WIDGET,__("Widget")),e}}]),t}(ve);v()(ge,"MODEL","model"),v()(ge,"FORM","form"),v()(ge,"ENUM","enum"),v()(ge,"CRUD","crud"),v()(ge,"WIDGET","widget");a("./routes/IndexPage.scss");var _e=Z.html.bem("IndexPage"),Ee=function(e){function t(){return i()(this,t),c()(this,m()(t).apply(this,arguments))}return f()(t,e),l()(t,[{key:"render",value:function(){var e=this;return _.a.createElement("div",{className:_e.block()},_.a.createElement("table",{className:"table table-sm"},_.a.createElement("thead",null,_.a.createElement("tr",null,_.a.createElement("th",null),ge.getKeys().map(function(e){return _.a.createElement("th",{key:e},ge.getLabel(e))}))),_.a.createElement("tbody",null,this.props.classes&&this.props.moduleIds.map(function(t){return _.a.createElement("tr",{key:t},_.a.createElement("th",{className:"pl-2"},t),ge.getKeys().map(function(a){return _.a.createElement("td",{key:a},_.a.createElement("div",{className:"list-group"},e.props.classes[a]&&e.props.classes[a].filter(function(e){return e.moduleId===t}).map(function(e){return _.a.createElement(oe,{key:e.name,className:_e(_e.element("link"),"list-group-item list-group-item-action"),to:"/".concat(a,"/").concat(t,"/").concat(e.name)},e.name)})),_.a.createElement(oe,{className:_e.element("add"),to:"/".concat(a,"/").concat(t)},"+ Add ",ge.getLabel(a)))}))}))))}}]),t}(_.a.PureComponent);v()(Ee,"propTypes",{moduleIds:C.a.arrayOf(C.a.string),classes:C.a.shape({model:C.a.arrayOf(C.a.shape({moduleId:C.a.string,name:C.a.string,className:C.a.string,tableName:C.a.string})),form:C.a.arrayOf(C.a.shape({moduleId:C.a.string,name:C.a.string,className:C.a.string})),enum:C.a.arrayOf(C.a.shape({moduleId:C.a.string,name:C.a.string,className:C.a.string}))})});var Ce,we,je,Ne=a("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),ke=a.n(Ne),xe=a("../../../../../ui/form/AutoCompleteField/AutoCompleteField.js").default,Oe=(a("../../../../../ui/form/BlankField/BlankField.js").default,a("../../../../../ui/form/CheckboxField/CheckboxField.js").default),Ie=(a("../../../../../ui/form/CheckboxListField/CheckboxListField.js").default,a("../../../../../ui/form/DateField/index.js"),a("../../../../../ui/form/DateTimeField/DateTimeField.js").default,a("../../../../../ui/form/DropDownField/DropDownField.js").default),Fe=a("../../../../../ui/form/Field/index.js"),Te=(a("../../../../../ui/form/FieldLayout/index.js"),a("./node_modules/redux-form/es/index.js")),Pe=a("./node_modules/react-dom/index.js"),Re=a("./node_modules/lodash-es/isString.js"),Ae=a("../../../../../ui/form/Field/Field.js"),Ve=a("../../../../../ui/form/fieldHoc.js"),Me=(a("../../../../../ui/form/FieldList/FieldListView.scss"),a("../../../../../reducers/fields.js")),Se=a("../../../../../ui/form/formIdHoc.js"),Le=Object(Ve.a)({componentId:"form.FieldList",list:!0})(Ce=Object(Se.a)({appendPrefix:!0})(Ce=Object(w.b)(function(e,t){var a=t.model;return Object(Re.a)(a)&&(a=Object(Me.d)(e,a)||null),{model:a}})((je=we=function(e){function t(){var e;return i()(this,t),(e=c()(this,m()(t).apply(this,arguments)))._onAdd=e._onAdd.bind(h()(e)),e._onRemove=e._onRemove.bind(h()(e)),e._renderField=e._renderField.bind(h()(e)),e._onKeyDown=e._onKeyDown.bind(h()(e)),e}return f()(t,e),l()(t,[{key:"getChildContext",value:function(){return{model:this.props.model,prefix:this.props.prefix,layout:this.props.layout,layoutProps:this.props.layoutProps,size:this.props.size}}}]),l()(t,[{key:"componentWillMount",value:function(){if(0===this.props.fields.length)for(var e=0;e<this.props.initialRowsCount;e++)this._onAdd();this.props.enableKeyboardNavigation&&document.addEventListener("keydown",this._onKeyDown,!1)}},{key:"componentWillUnmount",value:function(){this.props.enableKeyboardNavigation&&document.removeEventListener("keydown",this._onKeyDown,!1)}},{key:"_onKeyDown",value:function(e){var t=this;(function(e,t){for(var a=t.parentNode;null!==a;){if(a===e)return!0;a=a.parentNode}return!1})(Object(Pe.findDOMNode)(this),e.target)&&function(e,t){if(e.shiftKey&&-1!==[38,40].indexOf(e.keyCode)){e.preventDefault();for(var a=e.target.name.split("."),n=a[a.length-1],s=e.target;(s=s.parentElement)&&"table"!==s.tagName.toLowerCase(););var r=function(){return Array.prototype.slice.call(s.querySelectorAll('input:not([type="hidden"]), select')).filter(function(e){var t=e.name.split("."),s=t[t.length-1];return a.length===t.length&&n===s})},i=r(),o=i.findIndex(function(t){return t.name===e.target.name}),l=38===e.keyCode?o-1:o+1;0<=l&&l<i.length?i[l].focus():l===i.length&&(t(),setTimeout(function(){var e=r();e[l]&&e[l].focus()}))}}(e,function(){return t.props.dispatch(Object(Te.a)(t.props.formId,t.props.attribute))})}},{key:"render",value:function(){var e=this,t=this.props.view||Z.ui.getView("form.FieldListView"),a=this.props.itemView||Z.ui.getView("form.FieldListItemView"),n=(this.props.items||[]).filter(function(e){return!1!==e.visible}).map(function(t){return s()({},Object(Ae.getFieldPropsFromModel)(e.props.model,t.attribute),t,{disabled:t.disabled||e.props.disabled,size:t.size||e.props.size})});return _.a.createElement(t,k()({},this.props,this.props.view,{items:n,renderField:this._renderField,onAdd:this._onAdd}),this.props.fields.map(function(t,s){return _.a.createElement(a,k()({},e.props,e.props.itemViewProps,{items:n,renderField:e._renderField,onRemove:e._onRemove,key:s,prefix:t,rowIndex:s}))}))}},{key:"_renderField",value:function(e,t){return _.a.createElement(Ae.default,k()({layout:"inline"},e,{prefix:t}))}},{key:"_onAdd",value:function(){this.props.fields.push()}},{key:"_onRemove",value:function(e){this.props.fields.remove(e)}}]),t}(_.a.PureComponent),v()(we,"propTypes",{label:C.a.oneOfType([C.a.string,C.a.bool]),hint:C.a.string,attribute:C.a.string,items:C.a.arrayOf(C.a.shape({label:C.a.oneOfType([C.a.string,C.a.bool,C.a.element]),hint:C.a.oneOfType([C.a.string,C.a.bool,C.a.element]),attribute:C.a.string,prefix:C.a.string,visible:C.a.bool,model:C.a.oneOfType([C.a.string,C.a.func,C.a.object]),component:C.a.any,required:C.a.bool,size:C.a.oneOf(["sm","md","lg"]),placeholder:C.a.string,disabled:C.a.bool,onChange:C.a.func,className:C.a.string,headerClassName:C.a.string,view:C.a.func})),fields:C.a.object,required:C.a.bool,disabled:C.a.bool,size:C.a.oneOf(["sm","md","lg"]),initialRowsCount:C.a.number,showAdd:C.a.bool,showRemove:C.a.bool,onChange:C.a.func,className:C.a.string,view:C.a.func,viewProps:C.a.object,itemView:C.a.func,itemViewProps:C.a.object,enableKeyboardNavigation:C.a.bool}),v()(we,"defaultProps",{disabled:!1,required:!1,showAdd:!0,showRemove:!0,className:"",initialRowsCount:1,enableKeyboardNavigation:!0}),v()(we,"childContextTypes",{model:C.a.oneOfType([C.a.string,C.a.func,C.a.object]),prefix:C.a.string,layout:C.a.string,layoutProps:C.a.object,size:C.a.oneOf(["sm","md","lg"])}),Ce=je))||Ce)||Ce)||Ce,De=function(e){function t(){return i()(this,t),c()(this,m()(t).apply(this,arguments))}return f()(t,e),l()(t,[{key:"getChildContext",value:function(){return{model:this.props.model||this.context.model,prefix:(this.context.prefix||"")+(this.props.prefix||""),layout:this.props.layout||this.context.layout,layoutProps:s()({},this.context.layoutProps,this.props.layoutProps),size:this.props.size||this.context.size}}},{key:"render",value:function(){return this.props.children}}]),t}(_.a.PureComponent);v()(De,"propTypes",{model:C.a.oneOfType([C.a.string,C.a.func,C.a.object]),prefix:C.a.string,layout:C.a.string,layoutProps:C.a.object,size:C.a.oneOf(["sm","md","lg"])}),v()(De,"contextTypes",{model:C.a.oneOfType([C.a.string,C.a.func,C.a.object]),prefix:C.a.string,layout:C.a.string,layoutProps:C.a.object,size:C.a.oneOf(["sm","md","lg"])}),v()(De,"childContextTypes",{model:C.a.oneOfType([C.a.string,C.a.func,C.a.object]),prefix:C.a.string,layout:C.a.string,layoutProps:C.a.object,size:C.a.oneOf(["sm","md","lg"])});a("../../../../../ui/form/FileField/FileField.js").default;var qe,Ke,We,ze,Ue,Ge,He,Ye,Be,Je=a("../../../../../ui/form/Form/index.js"),Qe=(a("../../../../../ui/form/GeetestField/GeetestField.js").default,a("../../../../../ui/form/HtmlField/HtmlField.js").default,a("../../../../../ui/form/InputField/index.js")),$e=(a("../../../../../ui/form/NumberField/NumberField.js").default,a("../../../../../ui/form/PasswordField/PasswordField.js").default,a("../../../../../ui/form/RadioListField/RadioListField.js").default,a("../../../../../ui/form/RangeField/RangeField.js").default,a("../../../../../ui/form/ReCaptchaField/ReCaptchaField.js").default,a("../../../../../ui/form/SliderField/SliderField.js").default,a("../../../../../ui/form/SwitcherField/SwitcherField.js").default,a("../../../../../ui/form/TextField/TextField.js").default,a("./node_modules/reactstrap/dist/reactstrap.es.js")),Xe=a("./node_modules/redux-form/es/formValueSelector.js"),Ze=a("./node_modules/redux-form/es/Field.js"),et=(a("./routes/AccessPage/views/PermissionCheckbox.scss"),Z.html.bem("PermissionCheckbox")),tt=Object(w.b)()((We=Ke=function(e){function t(){var e;return i()(this,t),(e=c()(this,m()(t).apply(this,arguments)))._onChange=e._onChange.bind(h()(e)),e.state={isTooltipOpen:!1},e}return f()(t,e),l()(t,[{key:"render",value:function(){var e=this,t=_.a.createElement("label",null,_.a.createElement(Ze.a,{name:"rules[".concat(this.props.role,"][").concat(this.props.permission.name,"]"),component:"input",type:"checkbox",onClick:this._onChange})),a="tooltip_"+this.props.role+"_"+this.props.permission.name.replace(/[^0-9a-z]+/g,"_");return _.a.createElement("div",{key:this.props.permission.name,className:et.element("checkbox")},_.a.createElement("div",{id:a},t),this.props.showTooltip&&_.a.createElement($e.c,{placement:"top",isOpen:this.state.isTooltipOpen,target:a,toggle:function(){return e.setState({isTooltipOpen:!e.state.isTooltipOpen})}},this.props.permission.description))}},{key:"_onChange",value:function(e){var t=this,a=e.target.checked;this.props.dispatch(this.getChildrenNamesRecursive(this.props.permission.name).map(function(e){return Object(Te.b)("AccessRulesEditor","rules[".concat(t.props.role,"][").concat(e,"]"),a)})),a||this.props.dispatch(this.getParentNamesRecursive(this.props.permission.name).map(function(e){return Object(Te.b)("AccessRulesEditor","rules[".concat(t.props.role,"][").concat(e,"]"),!1)}))}},{key:"getChildrenNamesRecursive",value:function(e){var t=this,a=this.props.permissions.find(function(t){return t.name===e}),n=[].concat(a.children||[]);return n.forEach(function(e){n.push.apply(n,ke()(t.getChildrenNamesRecursive(e)))}),n}},{key:"getParentNamesRecursive",value:function(e){var t=[],a=this.props.permissions.find(function(t){return-1!==(t.children||[]).indexOf(e)});return a&&(t.push(a.name),t.push.apply(t,ke()(this.getParentNamesRecursive(a.name)))),t}}]),t}(_.a.PureComponent),v()(Ke,"propTypes",{role:C.a.string,permissions:C.a.arrayOf(C.a.shape({name:C.a.string,description:C.a.string,children:C.a.arrayOf(C.a.string)})),permission:C.a.shape({name:C.a.string,description:C.a.string,children:C.a.arrayOf(C.a.string)}),showTooltip:C.a.bool}),qe=We))||qe,at=(a("./routes/AccessPage/views/PermissionRow.scss"),Z.html.bem("PermissionRow")),nt=Object(Xe.a)("AccessRulesEditor"),st=Object(w.b)(function(e,t){var a=0,n=nt(e,"rules")||{},s=function(e){Object.keys(n).map(function(t){n[t][e]&&a++}),(t.permissions.find(function(t){return t.name===e}).children||[]).forEach(s)};return s(t.permission.name),{checkedCount:a}})((Ge=Ue=function(e){function t(){var e;return i()(this,t),(e=c()(this,m()(t).apply(this,arguments))).state={isExpanded:!1},e}return f()(t,e),l()(t,[{key:"render",value:function(){var e=this;return this.props.visible?_.a.createElement("div",{className:at.block()},_.a.createElement("div",{style:{width:400+200*this.props.roles.length}},_.a.createElement("div",{className:at.element("container"),style:{width:400}},0<this.getChildren().length&&_.a.createElement("a",{href:"javascript:void(0)",className:at.element("link"),onClick:function(){return e.setState({isExpanded:!e.state.isExpanded})},style:{marginLeft:30*this.props.level}},_.a.createElement("span",{className:at.element("collapse-icon")},this.state.isExpanded?"-":"+"),_.a.createElement("span",{className:at.element("description")},_.a.createElement("code",null,this.props.permission.description)," ",0<this.props.checkedCount&&_.a.createElement("span",{className:"badge"},this.props.checkedCount)))||_.a.createElement("div",{className:at.element("link"),style:{marginLeft:30*this.props.level}},_.a.createElement("span",{className:at.element("description")},_.a.createElement("code",null,this.props.permission.description)))),this.props.roles.map(function(t){return _.a.createElement("div",{key:t,style:{width:200},className:at.element("checkboxes")},_.a.createElement(tt,{permissions:e.props.permissions,permission:e.props.permission,role:t}),e.getInline().map(function(a){return _.a.createElement(tt,{key:a.name,permissions:e.props.permissions,permission:a,role:t,showTooltip:!0})}))})),0<this.getChildren().length&&_.a.createElement($e.a,{isOpen:this.state.isExpanded},_.a.createElement("div",null,this.getChildren().map(function(t){return _.a.createElement(st,{key:t.name,permission:t,roles:e.props.roles,permissions:e.props.permissions,enableInlineMode:e.props.enableInlineMode,level:e.props.level+1,visible:e.state.isExpanded})})))):_.a.createElement("div",null,this.props.roles.map(function(t){return _.a.createElement(Ze.a,{key:t,name:"rules[".concat(t,"][").concat(e.props.permission.name,"]"),component:"input",type:"hidden"})}),this.getChildren().map(function(t){return _.a.createElement(st,{key:t.name,permission:t,roles:e.props.roles,permissions:e.props.permissions,enableInlineMode:e.props.enableInlineMode,level:e.props.level+1,visible:!1})}))}},{key:"getChildren",value:function(){return this._getItems(!1)}},{key:"getInline",value:function(){return this.props.enableInlineMode?this._getItems(!0):[]}},{key:"_getItems",value:function(e){var t=this;return this.props.permission.children?this.props.permissions.filter(function(a){return-1!==t.props.permission.children.indexOf(a.name)&&(!t.props.enableInlineMode||e===!a.children)}):[]}}]),t}(_.a.PureComponent),v()(Ue,"propTypes",{roles:C.a.arrayOf(C.a.string),permissions:C.a.arrayOf(C.a.shape({name:C.a.string,description:C.a.string,children:C.a.arrayOf(C.a.string)})),permission:C.a.shape({name:C.a.string,description:C.a.string,children:C.a.arrayOf(C.a.string)}),parentPermission:C.a.string,level:C.a.number,checkedCount:C.a.number,enableInlineMode:C.a.bool,visible:C.a.bool}),v()(Ue,"defaultProps",{level:0}),ze=Ge))||ze,rt=st,it=(a("./routes/AccessPage/views/AccessRulesEditor.scss"),Z.html.bem("AccessRulesEditor")),ot=Z.http.hoc(function(e){return Z.http.post("/api/gii/get-permissions",{prefix:e.rulePrefix}).then(function(e){return{roles:e.roles,permissions:e.permissions,initialValues:e.initialValues}})})((Be=Ye=function(e){function t(){return i()(this,t),c()(this,m()(t).apply(this,arguments))}return f()(t,e),l()(t,[{key:"render",value:function(){var e=this;return this.props.roles?_.a.createElement(Je.a,{formId:"AccessRulesEditor",action:"/api/gii/permissions-save",className:it(it.block(),"form-horizontal"),initialValues:this.props.initialValues},_.a.createElement("div",{className:it.element("roles"),style:{marginLeft:400,width:400+200*this.props.roles.length}},this.props.roles.map(function(e){return _.a.createElement("div",{key:e,className:it(it.element("roles-item")),style:{width:200}},e)})),_.a.createElement("div",{className:it.element("permissions")},this.getRoots().map(function(t){return _.a.createElement(rt,{key:t.name,permission:t,roles:e.props.roles,permissions:e.props.permissions,enableInlineMode:"m"===e.props.rulePrefix,visible:!0})})),_.a.createElement("div",{className:"form-group"},_.a.createElement("div",{className:"col-xs-12"},_.a.createElement("button",{type:"submit",className:"btn btn-success"},"Сохранить")))):null}},{key:"getRoots",value:function(){var e=[];return this.props.permissions.forEach(function(t){t.children&&e.push.apply(e,ke()(t.children))}),this.props.permissions.filter(function(t){return-1===e.indexOf(t.name)})}}]),t}(_.a.PureComponent),v()(Ye,"propTypes",{roles:C.a.arrayOf(C.a.string),permissions:C.a.arrayOf(C.a.shape({name:C.a.string,description:C.a.string,children:C.a.arrayOf(C.a.string)})),initialValues:C.a.object,rulePrefix:C.a.string}),He=Be))||He,lt=(a("./routes/AccessPage/AccessPage.scss"),Z.html.bem("AccessPage")),ut=function(e){function t(){return i()(this,t),c()(this,m()(t).apply(this,arguments))}return f()(t,e),l()(t,[{key:"render",value:function(){return _.a.createElement("div",{className:lt.block()},_.a.createElement(j.a,{layout:"tabs",items:[{label:"Страницы",to:"/access/actions"},{label:"Модели",to:"/access/models"}]}),_.a.createElement(re,{routes:[{path:"/access/actions",component:ot,componentProps:{rulePrefix:"a"}},{path:"/access/models",component:ot,componentProps:{rulePrefix:"m"}}]}))}}]),t}(_.a.PureComponent);v()(ut,"propTypes",{roles:C.a.arrayOf(C.a.string)});var ct=ut,pt=function(){function e(){i()(this,e)}return l()(e,null,[{key:"fields",value:function(){return{}}},{key:"formatters",value:function(){return{}}},{key:"getRequiredFields",value:function(){return Object.entries(this.fields()).filter(function(e){return e[1].required}).map(function(e){return e[0]})}}]),e}(),mt=function(e){function t(){return i()(this,t),c()(this,m()(t).apply(this,arguments))}return f()(t,e),l()(t,null,[{key:"fields",value:function(){return{moduleId:{component:"InputField",attribute:"moduleId",label:__("Module ID"),required:!0},name:{component:"InputField",attribute:"name",label:__("Class name"),required:!0},queryModel:{component:"InputField",attribute:"queryModel",label:__("Query model"),required:!0},searchModel:{component:"InputField",attribute:"searchModel",label:__("Search model")},title:{component:"InputField",attribute:"title",label:__("Title"),required:!0},url:{component:"InputField",attribute:"url",label:__("Url")},createActionIndex:{component:"CheckboxField",attribute:"createActionIndex",label:__("Index action")},withDelete:{component:"CheckboxField",attribute:"withDelete",label:__("With Delete")},withSearch:{component:"CheckboxField",attribute:"withSearch",label:__("With Search")},createActionCreate:{component:"CheckboxField",attribute:"createActionCreate",label:__("Create action")},createActionUpdate:{component:"CheckboxField",attribute:"createActionUpdate",label:__("Update action")},createActionView:{component:"CheckboxField",attribute:"createActionView",label:__("View action")}}}}]),t}(pt);v()(mt,"className","steroids\\modules\\gii\\forms\\CrudEntity");var dt=function(e){function t(){return i()(this,t),c()(this,m()(t).apply(this,arguments))}return f()(t,e),l()(t,null,[{key:"fields",value:function(){return{name:{component:"InputField",attribute:"name",label:__("Name")},showInForm:{component:"CheckboxField",attribute:"showInForm",label:__("Show in Form")},showInTable:{component:"CheckboxField",attribute:"showInTable",label:__("Show in Table")},showInView:{component:"CheckboxField",attribute:"showInView",label:__("Show in View")}}}}]),t}(pt);v()(dt,"className","steroids\\modules\\gii\\forms\\CrudItemEntity");a("./routes/ClassCreatorPage/views/CrudCreatorView.scss");var ht=Z.html.bem("CrudCreatorView"),bt=function(e){function t(){return i()(this,t),c()(this,m()(t).apply(this,arguments))}return f()(t,e),l()(t,[{key:"render",value:function(){return _.a.createElement("div",{className:ht.block()},_.a.createElement(Je.a,{formId:"CrudCreatorView",action:"/api/gii/class-save",model:mt,layout:"default",size:"sm",initialValues:this.props.initialValues,onComplete:this.props.onEntityComplete},_.a.createElement("div",{className:"row"},_.a.createElement("div",{className:"col-3"},_.a.createElement(Fe.a,{attribute:"moduleId"})),_.a.createElement("div",{className:"col-3"},_.a.createElement(Fe.a,{attribute:"name",placeholder:"UsersController"}))),_.a.createElement("div",{className:"row"},_.a.createElement("div",{className:"col-5"},_.a.createElement(Fe.a,{attribute:"queryModel",placeholder:"app\\user\\models\\User"})),_.a.createElement("div",{className:"col-5"},_.a.createElement(Fe.a,{attribute:"searchModel",placeholder:"app\\user\\forms\\UserSearch"}))),_.a.createElement("div",{className:"row"},_.a.createElement("div",{className:"col-5"},_.a.createElement(Fe.a,{attribute:"title",placeholder:"Поиск пользователей"})),_.a.createElement("div",{className:"col-3"},_.a.createElement(Fe.a,{attribute:"url",placeholder:"/users"}))),_.a.createElement("h3",{className:"mt-4"},"Attributes"),_.a.createElement(Le,{attribute:"items",model:dt,appTypes:this.props.appTypes,className:ht(ht.element("field-list"),"my-2"),items:[{attribute:"name"},{attribute:"showInForm"},{attribute:"showInTable"},{attribute:"showInView"}]}),_.a.createElement(Fe.a,{attribute:"createActionIndex"}),_.a.createElement(Fe.a,{attribute:"withDelete"}),_.a.createElement(Fe.a,{attribute:"withSearch"}),_.a.createElement(Fe.a,{attribute:"createActionCreate"}),_.a.createElement(Fe.a,{attribute:"createActionUpdate"}),_.a.createElement(Fe.a,{attribute:"createActionView"}),_.a.createElement("div",{className:"mt-4 mb-5"},_.a.createElement(ie.a,{type:"submit",label:"Save"}))))}}]),t}(_.a.PureComponent);v()(bt,"propTypes",{entity:C.a.shape({moduleId:C.a.string,name:C.a.string,className:C.a.string}),initialValues:C.a.object,appTypes:C.a.arrayOf(C.a.shape({name:C.a.string,title:C.a.string,additionalFields:C.a.arrayOf(C.a.shape({attribute:C.a.string,component:C.a.string,label:C.a.string}))})),classType:C.a.string,onEntityComplete:C.a.func});var ft=a("./node_modules/lodash-es/upperFirst.js"),yt=function(e){function t(){return i()(this,t),c()(this,m()(t).apply(this,arguments))}return f()(t,e),l()(t,null,[{key:"fields",value:function(){return{moduleId:{component:"InputField",attribute:"moduleId",label:__("Module ID"),required:!0},name:{component:"InputField",attribute:"name",label:__("Class name"),required:!0},isCustomValues:{component:"CheckboxField",attribute:"isCustomValues",label:__("Use custom values")}}}}]),t}(pt);v()(yt,"className","steroids\\modules\\gii\\forms\\EnumEntity");var vt=function(e){function t(){return i()(this,t),c()(this,m()(t).apply(this,arguments))}return f()(t,e),l()(t,null,[{key:"fields",value:function(){return{name:{component:"InputField",attribute:"name",label:__("Name"),required:!0},value:{component:"InputField",attribute:"value",label:__("Value")},label:{component:"InputField",attribute:"label",label:__("Label")},cssClass:{component:"InputField",attribute:"cssClass",label:__("CSS Class")},custom:{component:"CheckboxField",attribute:"custom",label:__("Custom values")}}}}]),t}(pt);v()(vt,"className","steroids\\modules\\gii\\forms\\EnumItemEntity");a("./routes/ClassCreatorPage/views/EnumCreatorView.scss");var gt,_t,Et,Ct=Z.html.bem("EnumCreatorView"),wt=null,jt=Object(w.b)(function(e){wt||(wt=Object(Xe.a)("EnumCreatorView"));var t=wt(e,"isCustomValues","items");return{isCustomValues:!!t.isCustomValues,hasEnumValues:!!(t.items||[]).find(function(e){return e&&e.value})}})((Et=_t=function(e){function t(){return i()(this,t),c()(this,m()(t).apply(this,arguments))}return f()(t,e),l()(t,[{key:"render",value:function(){return _.a.createElement("div",{className:Ct.block()},_.a.createElement(Je.a,{formId:"EnumCreatorView",action:"/api/gii/class-save",model:yt,layout:"default",size:"sm",initialValues:this.props.initialValues,onComplete:this.props.onEntityComplete},_.a.createElement("div",{className:"row"},_.a.createElement("div",{className:"col-3"},_.a.createElement(Fe.a,{attribute:"moduleId"})),_.a.createElement("div",{className:"col-4"},_.a.createElement(Fe.a,{attribute:"name"}))),_.a.createElement("div",{className:"mt-2"},_.a.createElement(Oe,{attribute:"isCustomValues",label:"Show Enum values",disabled:this.props.hasEnumValues})),_.a.createElement("h3",{className:"mt-4"},"Items"),_.a.createElement(Le,{attribute:"items",model:vt,className:Ct(Ct.element("field-list"),"my-2"),items:[].concat([{attribute:"name",className:Ct.element("input-attribute")},{attribute:"value",visible:this.props.isCustomValues||this.props.hasEnumValues},{attribute:"label"},{attribute:"cssClass"}]).concat(Object(Q.a)(this.props.entity,"customColumns",[]).map(function(e){return{attribute:"custom."+e,label:Object(ft.a)(e),component:Qe.a}}))}),_.a.createElement("div",{className:"mt-4 mb-5"},_.a.createElement(ie.a,{type:"submit",label:"Save"}))))}}]),t}(_.a.PureComponent),v()(_t,"propTypes",{entity:C.a.shape({moduleId:C.a.string,name:C.a.string,className:C.a.string}),initialValues:C.a.object,appTypes:C.a.arrayOf(C.a.shape({name:C.a.string,title:C.a.string,additionalFields:C.a.arrayOf(C.a.shape({attribute:C.a.string,component:C.a.string,label:C.a.string}))})),classType:C.a.string,isCustomValues:C.a.bool,hasEnumValues:C.a.bool,onEntityComplete:C.a.func}),gt=Et))||gt,Nt=a("./node_modules/redux-form/es/getFormValues.js"),kt=a("./node_modules/lodash/get.js"),xt=a.n(kt),Ot=a("./node_modules/lodash/some.js"),It=a.n(Ot),Ft=function(e){function t(){return i()(this,t),c()(this,m()(t).apply(this,arguments))}return f()(t,e),l()(t,null,[{key:"getLabels",value:function(){var e;return e={},v()(e,this.HAS_ONE,__("Has One")),v()(e,this.HAS_MANY,__("Has Many")),v()(e,this.MANY_MANY,__("Many-Many")),e}}]),t}(ve);v()(Ft,"HAS_ONE","has_one"),v()(Ft,"HAS_MANY","has_many"),v()(Ft,"MANY_MANY","many_many");var Tt=function(e){function t(){return i()(this,t),c()(this,m()(t).apply(this,arguments))}return f()(t,e),l()(t,null,[{key:"getLabels",value:function(){var e;return e={},v()(e,this.UPDATE,__("Update")),v()(e,this.CREATE,__("Create")),v()(e,this.NONE,__("None")),e}}]),t}(ve);v()(Tt,"UPDATE","update"),v()(Tt,"CREATE","create"),v()(Tt,"NONE","none");var Pt=function(e){function t(){return i()(this,t),c()(this,m()(t).apply(this,arguments))}return f()(t,e),l()(t,null,[{key:"fields",value:function(){return{moduleId:{component:"InputField",attribute:"moduleId",label:__("Module ID"),required:!0},name:{component:"InputField",attribute:"name",label:__("Class name"),required:!0},tableName:{component:"InputField",attribute:"tableName",label:__("Table name")},migrateMode:{component:"DropDownField",attribute:"migrateMode",items:Tt,label:__("Migration mode")},queryModel:{component:"InputField",attribute:"queryModel",label:__("Query model"),hint:__("Set for SearchModel, skip for FormModel")},className:{component:"InputField",attribute:"className",label:__("Class name")}}}}]),t}(pt);v()(Pt,"className","steroids\\modules\\gii\\forms\\ModelEntity");var Rt=function(e){function t(){return i()(this,t),c()(this,m()(t).apply(this,arguments))}return f()(t,e),l()(t,null,[{key:"fields",value:function(){return{name:{component:"InputField",attribute:"name",label:__("Attribute"),required:!0},prevName:{component:"InputField",attribute:"prevName",label:__("Previous name"),type:"hidden"},label:{component:"InputField",attribute:"label",label:__("Label")},hint:{component:"InputField",attribute:"hint",label:__("Hint")},example:{component:"InputField",attribute:"example",label:__("Example value")},appType:{component:"InputField",attribute:"appType",label:__("Type"),required:!0},defaultValue:{component:"InputField",attribute:"defaultValue",label:__("Default value")},isRequired:{component:"CheckboxField",attribute:"isRequired",label:__("Required")},isSortable:{component:"CheckboxField",attribute:"isSortable",label:__("Sortable")},isPublishToFrontend:{component:"CheckboxField",attribute:"isPublishToFrontend",label:__("Publish")}}}}]),t}(pt);v()(Rt,"className","steroids\\modules\\gii\\forms\\ModelAttributeEntity");var At,Vt,Mt,St=function(e){function t(){return i()(this,t),c()(this,m()(t).apply(this,arguments))}return f()(t,e),l()(t,null,[{key:"fields",value:function(){return{type:{component:"InputField",attribute:"type",label:__("Type"),required:!0},name:{component:"InputField",attribute:"name",label:__("Name"),required:!0},relationModel:{component:"InputField",attribute:"relationModel",label:__("Model class"),required:!0},relationKey:{component:"InputField",attribute:"relationKey",label:__("Relation Key")},selfKey:{component:"InputField",attribute:"selfKey",label:__("Self key")},viaTable:{component:"InputField",attribute:"viaTable",label:__("Table name")},viaRelationKey:{component:"InputField",attribute:"viaRelationKey",label:__("Relation Key")},viaSelfKey:{component:"InputField",attribute:"viaSelfKey",label:__("Self key")}}}}]),t}(pt);v()(St,"className","steroids\\modules\\gii\\forms\\ModelRelationEntity");var Lt,Dt,qt,Kt,Wt,zt,Ut=Z.html.bem("FieldListView"),Gt=null,Ht=Object(w.b)(function(e,t){return{appType:(Gt=Gt||Object(Xe.a)(t.formId))(e,t.prefix+"appType"),isProtected:(Gt=Gt||Object(Xe.a)(t.formId))(e,t.prefix+"isProtected")}})((Mt=Vt=function(e){function t(){return i()(this,t),c()(this,m()(t).apply(this,arguments))}return f()(t,e),l()(t,[{key:"render",value:function(){var e=this;return[_.a.createElement("tr",{key:"l1",className:Ut.element("tr",{"is-protected":this.props.isProtected})},this.renderItems(!0),this.props.showRemove&&_.a.createElement("td",{className:Ut.element("table-cell","remove")},(!this.props.required||0<this.props.rowIndex)&&_.a.createElement("div",{className:Ut.element("remove"),onClick:function(){return e.props.onRemove(e.props.rowIndex)}},"×"))),_.a.createElement("tr",{key:"l2",className:Ut.element("tr",{"is-protected":this.props.isProtected})},this.renderItems(!1),_.a.createElement("td",{colSpan:3,className:Ut.element("table-cell")},_.a.createElement("div",{className:"d-flex flex-row w-100"},this.renderAdditional())))]}},{key:"renderItems",value:function(e){var t=this;return this.props.items.filter(function(t){return e===!!t.firstLine}).map(function(a,n){return _.a.createElement("td",{key:n,className:Ut(Ut.element("table-cell"),a.className),colSpan:e||0!==n?null:2},t.props.renderField(a,t.props.prefix))})}},{key:"renderAdditional",value:function(){var e=this,t=(this.props.appTypes||[]).find(function(t){return t.name===e.props.appType});return t&&t.additionalFields?t.additionalFields.map(function(t,a){return _.a.createElement("div",{key:"additional_".concat(a),className:Ut(Ut.element("additional"),"mr-1")},"CheckboxField"!==t.component&&_.a.createElement("div",{className:Ut.element("additional-label")},t.label),e.props.renderField(t,e.props.prefix))}):null}}]),t}(_.a.PureComponent),v()(Vt,"propTypes",{label:C.a.oneOfType([C.a.string,C.a.bool]),hint:C.a.string,required:C.a.bool,prefix:C.a.string,rowIndex:C.a.number,items:C.a.arrayOf(C.a.object),showRemove:C.a.bool,onRemove:C.a.func,renderField:C.a.func,disabled:C.a.bool,className:C.a.string,appType:C.a.string,isProtected:C.a.bool}),At=Mt))||At,Yt=Z.html.bem("FieldListView"),Bt=null,Jt=Object(w.b)(function(e,t){return{relationType:(Bt=Bt||Object(Xe.a)(t.formId))(e,t.prefix+"type")}})((qt=Dt=function(e){function t(){var e;return i()(this,t),(e=c()(this,m()(t).apply(this,arguments))).state={relationFocused:!1,selfFocused:!1},e}return f()(t,e),l()(t,[{key:"render",value:function(){var e=this;return _.a.createElement("tr",{key:this.props.rowIndex},this.props.items.filter(function(t){return!t.isVia||e.props.relationType===Ft.MANY_MANY}).map(function(t,a){var n=-1===["viaRelationKey","viaSelfKey"].indexOf(t.attribute)?{}:{onFocus:function(){return e._setFocus("viaRelationKey"===t.attribute,!0)},onBlur:function(){return e._setFocus("viaRelationKey"===t.attribute,!1)}};return _.a.createElement("td",{key:a,className:Yt(Yt.element("table-cell"),t.className,e._isHighlighted(t.attribute)&&"table-success")},_.a.createElement(Fe.a,k()({layout:"inline"},t,{inputProps:n,prefix:e.props.prefix})))}),this.props.showRemove&&_.a.createElement("td",{className:Yt.element("table-cell","remove")},(!this.props.required||0<this.props.rowIndex)&&_.a.createElement("div",{className:Yt.element("remove"),onClick:function(){return e.props.onRemove(e.props.rowIndex)}},"×")))}},{key:"_isHighlighted",value:function(e){var t=-1!==["selfKey","viaSelfKey"].indexOf(e),a=-1!==["viaRelationKey","relationKey","relationModel"].indexOf(e);return(t||a)&&this._isFocused(a)}},{key:"_isFocused",value:function(e){return!0===this.state[e?"relationFocuses":"selfFocuses"]}},{key:"_setFocus",value:function(e,t){this.setState(v()({},e?"relationFocuses":"selfFocuses",t))}}]),t}(_.a.PureComponent),v()(Dt,"propTypes",{label:C.a.oneOfType([C.a.string,C.a.bool]),hint:C.a.string,size:C.a.oneOf(["sm","md","lg"]),required:C.a.bool,prefix:C.a.string,rowIndex:C.a.number,items:C.a.arrayOf(C.a.object),showRemove:C.a.bool,onRemove:C.a.func,renderField:C.a.func,disabled:C.a.bool,className:C.a.string,relationType:C.a.string}),Lt=qt))||Lt,Qt=(a("./routes/ClassCreatorPage/views/ModelCreatorView.scss"),Z.html.bem("ModelCreatorView")),$t=Object(w.b)(function(e){return{formValues:Object(Nt.a)("ModelCreatorView")(e)}})((zt=Wt=function(e){function t(){return i()(this,t),c()(this,m()(t).apply(this,arguments))}return f()(t,e),l()(t,[{key:"render",value:function(){var e=this;return _.a.createElement("div",{className:Qt.block()},_.a.createElement(Je.a,{formId:"ModelCreatorView",action:"/api/gii/class-save",model:Pt,layout:"default",size:"sm",initialValues:this.props.initialValues,onComplete:this.props.onEntityComplete},_.a.createElement("div",{className:"row"},_.a.createElement("div",{className:"col-3"},_.a.createElement(Fe.a,{attribute:"moduleId",items:this.props.moduleIds,component:xe})),_.a.createElement("div",{className:"col-4"},_.a.createElement(Fe.a,{attribute:"name"})),this.props.classType===ge.MODEL&&_.a.createElement("div",{className:"col-4"},_.a.createElement(Fe.a,{attribute:"tableName"}))),this.props.classType===ge.FORM&&_.a.createElement("div",{className:"row"},_.a.createElement("div",{className:"col-4"},_.a.createElement(Fe.a,{attribute:"queryModel",component:xe,items:xt()(this.props,"classes.model",[]).map(function(e){return e.className})}))),_.a.createElement("h3",{className:"mt-4"},"Attributes"),_.a.createElement(Le,{attribute:"attributeItems",model:Rt,itemView:Ht,appTypes:this.props.appTypes,className:Qt(Qt.element("field-list"),"my-2"),items:[{attribute:"name",placeholder:"Attribute",className:Qt.element("input-attribute"),firstLine:!0,component:xe,items:this.props.sampleAttributes,onSelect:function(t,a){It()(Object.keys(t.params),function(t){return!!xt()(e.props.formValues,a.prefix+"."+t)})||e.props.dispatch(Object.keys(t.params).map(function(e){return Object(Te.b)("ModelCreatorView",a.prefix+"."+e,t.params[e])}))}},{attribute:"label",label:"Label / Hint",placeholder:"Label",className:Qt.element("input-label"),firstLine:!0},{attribute:"hint",placeholder:"Hint",className:Qt.element("input-hint"),headerClassName:"d-none"},{attribute:"example",placeholder:"Example value",className:Qt.element("input-example-value"),headerClassName:"d-none"},{attribute:"defaultValue",label:"Default / Example",placeholder:"Default value",className:Qt.element("input-default-value"),firstLine:!0},{attribute:"appType",firstLine:!0,className:Qt.element("input-app-type"),component:xe,items:(this.props.appTypes||[]).map(function(e){return e.name})},{attribute:"isRequired",firstLine:!0,headerClassName:"d-none"},{attribute:"isSortable",firstLine:!0,headerClassName:"d-none",visible:this.props.classType===ge.FORM},{attribute:"isPublishToFrontend",firstLine:!0,headerClassName:"d-none",visible:this.props.classType===ge.MODEL}]}),_.a.createElement("div",null,_.a.createElement("h3",{className:"mt-4"},"Relations"),_.a.createElement(Le,{attribute:"relationItems",model:St,itemView:Jt,className:Qt(Qt.element("field-list"),"my-2"),initialRowsCount:0,items:[{attribute:"type",component:Ie,items:Ft},{attribute:"name"},{attribute:"relationModel",items:xt()(this.props,"classes.model",[]).map(function(e){return e.className}),component:xe},{attribute:"relationKey"},{attribute:"selfKey"},{attribute:"viaTable",placeholder:"Junction table",headerClassName:"d-none",isVia:!0},{attribute:"viaRelationKey",placeholder:"Relation key",headerClassName:"d-none",isVia:!0},{attribute:"viaSelfKey",placeholder:"Self key",headerClassName:"d-none",isVia:!0}]})),_.a.createElement("div",{className:"mt-4 row"},_.a.createElement("div",{className:"col-md-3"},_.a.createElement(Fe.a,{attribute:"migrateMode",items:Tt}))),_.a.createElement("div",{className:"mb-5"},_.a.createElement(ie.a,{type:"submit",label:"Save"}))))}}]),t}(_.a.PureComponent),v()(Wt,"propTypes",{moduleIds:C.a.arrayOf(C.a.string),entity:C.a.shape({moduleId:C.a.string,name:C.a.string,className:C.a.string}),initialValues:C.a.object,appTypes:C.a.arrayOf(C.a.shape({name:C.a.string,title:C.a.string,additionalFields:C.a.arrayOf(C.a.shape({attribute:C.a.string,component:C.a.string,label:C.a.string}))})),classType:C.a.string,onEntityComplete:C.a.func,classes:C.a.shape({model:C.a.arrayOf(C.a.shape({moduleId:C.a.string,name:C.a.string,className:C.a.string,tableName:C.a.string})),form:C.a.arrayOf(C.a.shape({moduleId:C.a.string,name:C.a.string,className:C.a.string})),enum:C.a.arrayOf(C.a.shape({moduleId:C.a.string,name:C.a.string,className:C.a.string}))}),sampleAttributes:C.a.arrayOf(C.a.shape({appType:C.a.string,name:C.a.string,defaultValue:C.a.string,example:C.a.string,hint:C.a.string,label:C.a.string})),formValues:C.a.object}),Kt=zt))||Kt,Xt=function(e){function t(){return i()(this,t),c()(this,m()(t).apply(this,arguments))}return f()(t,e),l()(t,null,[{key:"fields",value:function(){return{moduleId:{component:"InputField",attribute:"moduleId",label:__("Module ID"),required:!0},name:{component:"InputField",attribute:"name",label:__("Class name"),required:!0},parentName:{component:"InputField",attribute:"parentName",label:__("Parent widget name"),hint:__("For create child view")},withPropTypes:{component:"CheckboxField",attribute:"withPropTypes",label:__("With PropTypes")},withConnect:{component:"CheckboxField",attribute:"withConnect",label:__("With connect()")},withGrid:{component:"CheckboxField",attribute:"withGrid",label:__("With Grid")},withForm:{component:"CheckboxField",attribute:"withForm",label:__("With Form")},withRouter:{component:"CheckboxField",attribute:"withRouter",label:__("With Router")}}}}]),t}(pt);v()(Xt,"className","steroids\\modules\\gii\\forms\\WidgetEntity");a("./routes/ClassCreatorPage/views/WidgetCreatorView.scss");var Zt=Z.html.bem("WidgetCreatorView"),ea=function(e){function t(){return i()(this,t),c()(this,m()(t).apply(this,arguments))}return f()(t,e),l()(t,[{key:"render",value:function(){return _.a.createElement("div",{className:Zt.block()},_.a.createElement(Je.a,{formId:"WidgetCreatorView",action:"/api/gii/class-save",model:Xt,layout:"default",initialValues:this.props.initialValues,onComplete:this.props.onEntityComplete},_.a.createElement("div",{className:"row"},_.a.createElement("div",{className:"col-3"},_.a.createElement(Fe.a,{attribute:"moduleId"})),_.a.createElement("div",{className:"col-3"},_.a.createElement(Fe.a,{attribute:"name"}))),_.a.createElement(Fe.a,{attribute:"parentName"}),_.a.createElement("h3",{className:"mt-4"},"Template"),_.a.createElement(Fe.a,{attribute:"withPropTypes"}),_.a.createElement(Fe.a,{attribute:"withConnect"}),_.a.createElement(Fe.a,{attribute:"withGrid"}),_.a.createElement(Fe.a,{attribute:"withForm"}),_.a.createElement(Fe.a,{attribute:"withRouter"}),_.a.createElement("div",{className:"mt-4 mb-5"},_.a.createElement(ie.a,{type:"submit",label:"Save"}))))}}]),t}(_.a.PureComponent);v()(ea,"propTypes",{entity:C.a.shape({moduleId:C.a.string,name:C.a.string,className:C.a.string}),initialValues:C.a.object,appTypes:C.a.arrayOf(C.a.shape({name:C.a.string,title:C.a.string,additionalFields:C.a.arrayOf(C.a.shape({attribute:C.a.string,component:C.a.string,label:C.a.string}))})),classType:C.a.string,onEntityComplete:C.a.func});a("./routes/ClassCreatorPage/ClassCreatorPage.scss");var ta=Z.html.bem("ClassCreatorPage"),aa=function(e){function t(){return i()(this,t),c()(this,m()(t).apply(this,arguments))}return f()(t,e),l()(t,[{key:"render",value:function(){var e,t={classType:Object(Q.a)(this.props,"match.params.classType"),moduleId:Object(Q.a)(this.props,"match.params.moduleId"),name:Object(Q.a)(this.props,"match.params.name")},a=Object(Q.a)(this.props,["classes",t.classType],[]).find(function(e){return e.moduleId===t.moduleId&&e.name===t.name});if(!a&&t.moduleId&&t.name)return null;var n=(e={},v()(e,ge.CRUD,bt),v()(e,ge.ENUM,jt),v()(e,ge.MODEL,$t),v()(e,ge.FORM,$t),v()(e,ge.WIDGET,ea),e)[t.classType];return _.a.createElement("div",{className:ta.block()},_.a.createElement("nav",{"aria-label":"breadcrumb"},_.a.createElement("ol",{className:"breadcrumb"},_.a.createElement("li",{className:"breadcrumb-item"},_.a.createElement(oe,{to:"/"},"Сущности")),a&&[_.a.createElement("li",{key:0,className:"breadcrumb-item active"},a.moduleId),_.a.createElement("li",{key:1,className:"breadcrumb-item active"},t.classType),_.a.createElement("li",{key:2,className:"breadcrumb-item active"},a.name)]||_.a.createElement("li",{className:"breadcrumb-item active"},"Создание новой"))),_.a.createElement("h1",null,a?"Редактирование сущности":"Создание сущности"),_.a.createElement(n,{entity:a,initialValues:s()({},t,a),classType:t.classType,moduleIds:this.props.moduleIds,classes:this.props.classes,appTypes:this.props.appTypes,sampleAttributes:this.props.sampleAttributes,onEntityComplete:this.props.onEntityComplete}))}}]),t}(_.a.PureComponent);v()(aa,"propTypes",{moduleIds:C.a.arrayOf(C.a.string),classes:C.a.shape({model:C.a.arrayOf(C.a.shape({moduleId:C.a.string,name:C.a.string,className:C.a.string,tableName:C.a.string})),form:C.a.arrayOf(C.a.shape({moduleId:C.a.string,name:C.a.string,className:C.a.string})),enum:C.a.arrayOf(C.a.shape({moduleId:C.a.string,name:C.a.string,className:C.a.string}))}),appTypes:C.a.arrayOf(C.a.shape({name:C.a.string,title:C.a.string,additionalFields:C.a.arrayOf(C.a.shape({attribute:C.a.string,component:C.a.string,label:C.a.string}))})),onEntityComplete:C.a.func,sampleAttributes:C.a.arrayOf(C.a.shape({appType:C.a.string,name:C.a.string,defaultValue:C.a.string,example:C.a.string,hint:C.a.string,label:C.a.string}))});var na,sa,ra,ia=aa;a("./GiiApplication.scss");a.d(t,"default",function(){return la});var oa=Z.html.bem("GiiApplication"),la=Z.widget.register("\\steroids\\modules\\gii\\widgets\\GiiApplication\\GiiApplication")(na=Object(w.b)()((ra=sa=function(e){function t(){var e;return i()(this,t),(e=c()(this,m()(t).apply(this,arguments)))._onEntityComplete=e._onEntityComplete.bind(h()(e)),e.state={isLoading:!1,classes:null,appTypes:null,moduleIds:null,sampleAttributes:[]},e}return f()(t,e),l()(t,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){return _.a.createElement("div",{className:oa.block({loading:this.state.isLoading})},_.a.createElement("nav",{className:"navbar navbar-expand-md navbar-dark bg-dark mb-3"},_.a.createElement("div",{className:"container"},_.a.createElement("div",null,_.a.createElement(oe,{className:"navbar-brand",to:"/"},"Gii"),_.a.createElement(oe,{className:"navbar-brand",url:this.props.siteName},"На главную")),_.a.createElement(j.a,{layout:"navbar",items:[{label:"Сущности",to:"/"},{label:"Права доступа",to:"/access/actions"},{label:"Карта сайта",to:"/site-map"}]}))),_.a.createElement("div",{className:oa(oa.element("content"),"container")},_.a.createElement(pe,null),_.a.createElement(re,{routes:[{exact:!0,path:"/",component:Ee,componentProps:{moduleIds:this.state.moduleIds,classes:this.state.classes}},{path:"/access",component:ct},{path:"/:classType("+ge.getKeys().join("|")+")/:moduleId?/:name?",component:ia,componentProps:{moduleIds:this.state.moduleIds,classes:this.state.classes,appTypes:this.state.appTypes,sampleAttributes:this.state.sampleAttributes,onEntityComplete:this._onEntityComplete}}]})))}},{key:"_onEntityComplete",value:function(){this.props.dispatch(Object(J.b)("/")),this.fetchData()}},{key:"_getSampleAttributes",value:function(e){var t={},a={id:["primaryKey","ID"],title:["string","Название"],email:["email","Email"],phone:["phone","Телефон"],password:["password","Пароль"],photo:["file","Фотография"],photos:["files","Фотографии"],image:["file","Изображение"],images:["files","Изображения"],file:["file","Файл"],files:["files","Файлы"],passwordAgain:["password","Повтор пароля"],description:["text","Описание"],content:["text","Контент"],userId:["integer","Пользователь"],authorId:["integer","Автор"],isEnable:["boolean","Включен?"],isDeleted:["boolean","Удален?"],status:["enum","Статус"],createTime:["autoTime","Добавлен"],updateTime:["autoTime","Обновлен",{touchOnUpdate:!0}]};return Object.keys(a).forEach(function(e){t[e]={counter:1,params:s()({appType:a[e][0],label:a[e][1]},a[e][2])}}),[e.model,e.form].map(function(e){e.forEach(function(e){e.attributeItems.map(function(e){t[e.name]?t[e.name].counter++:t[e.name]={counter:1,params:{appType:e.appType,defaultValue:e.defaultValue,example:e.example,hint:e.hint,label:e.label}}})})}),Object.keys(t).forEach(function(e){t[e].id=e,t[e].label=e}),de()(be()(t),"counter","desc")}},{key:"fetchData",value:function(){var e=this;this.setState({isLoading:!0}),Z.http.post("/api/gii/get-entities").then(function(t){return e.setState(s()({},t,{sampleAttributes:e._getSampleAttributes(t.classes),isLoading:!1}))})}}]),t}(_.a.PureComponent),v()(sa,"propTypes",{roles:C.a.arrayOf(C.a.string),siteName:C.a.string}),na=ra))||na)||na},"./GiiApplication.scss":function(e,t,a){},"./node_modules/@babel/runtime/helpers/arrayWithHoles.js":function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},"./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js":function(e,t){e.exports=function(e,t){var a=[],n=!0,s=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){s=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(s)throw r}}return a}},"./node_modules/@babel/runtime/helpers/nonIterableRest.js":function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},"./node_modules/@babel/runtime/helpers/slicedToArray.js":function(e,t,a){var n=a("./node_modules/@babel/runtime/helpers/arrayWithHoles.js"),s=a("./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js"),r=a("./node_modules/@babel/runtime/helpers/nonIterableRest.js");e.exports=function(e,t){return n(e)||s(e,t)||r()}},"./node_modules/lodash/_baseMap.js":function(e,t,a){var n=a("./node_modules/lodash/_baseEach.js"),s=a("./node_modules/lodash/isArrayLike.js");e.exports=function(e,t){var a=-1,r=s(e)?Array(e.length):[];return n(e,function(e,n,s){r[++a]=t(e,n,s)}),r}},"./node_modules/lodash/_baseOrderBy.js":function(e,t,a){var n=a("./node_modules/lodash/_arrayMap.js"),s=a("./node_modules/lodash/_baseIteratee.js"),r=a("./node_modules/lodash/_baseMap.js"),i=a("./node_modules/lodash/_baseSortBy.js"),o=a("./node_modules/lodash/_baseUnary.js"),l=a("./node_modules/lodash/_compareMultiple.js"),u=a("./node_modules/lodash/identity.js");e.exports=function(e,t,a){var c=-1;t=n(t.length?t:[u],o(s));var p=r(e,function(e,a,s){return{criteria:n(t,function(t){return t(e)}),index:++c,value:e}});return i(p,function(e,t){return l(e,t,a)})}},"./node_modules/lodash/_baseSortBy.js":function(e,t){e.exports=function(e,t){var a=e.length;for(e.sort(t);a--;)e[a]=e[a].value;return e}},"./node_modules/lodash/_baseValues.js":function(e,t,a){var n=a("./node_modules/lodash/_arrayMap.js");e.exports=function(e,t){return n(t,function(t){return e[t]})}},"./node_modules/lodash/_compareAscending.js":function(e,t,a){var n=a("./node_modules/lodash/isSymbol.js");e.exports=function(e,t){if(e!==t){var a=void 0!==e,s=null===e,r=e==e,i=n(e),o=void 0!==t,l=null===t,u=t==t,c=n(t);if(!l&&!c&&!i&&e>t||i&&o&&u&&!l&&!c||s&&o&&u||!a&&u||!r)return 1;if(!s&&!i&&!c&&e<t||c&&a&&r&&!s&&!i||l&&a&&r||!o&&r||!u)return-1}return 0}},"./node_modules/lodash/_compareMultiple.js":function(e,t,a){var n=a("./node_modules/lodash/_compareAscending.js");e.exports=function(e,t,a){for(var s=-1,r=e.criteria,i=t.criteria,o=r.length,l=a.length;++s<o;){var u=n(r[s],i[s]);if(u)return s>=l?u:u*("desc"==a[s]?-1:1)}return e.index-t.index}},"./node_modules/lodash/orderBy.js":function(e,t,a){var n=a("./node_modules/lodash/_baseOrderBy.js"),s=a("./node_modules/lodash/isArray.js");e.exports=function(e,t,a,r){return null==e?[]:(s(t)||(t=null==t?[]:[t]),s(a=r?void 0:a)||(a=null==a?[]:[a]),n(e,t,a))}},"./node_modules/lodash/values.js":function(e,t,a){var n=a("./node_modules/lodash/_baseValues.js"),s=a("./node_modules/lodash/keys.js");e.exports=function(e){return null==e?[]:n(e,s(e))}},"./routes/AccessPage/AccessPage.scss":function(e,t,a){},"./routes/AccessPage/views/AccessRulesEditor.scss":function(e,t,a){},"./routes/AccessPage/views/PermissionCheckbox.scss":function(e,t,a){},"./routes/AccessPage/views/PermissionRow.scss":function(e,t,a){},"./routes/ClassCreatorPage/ClassCreatorPage.scss":function(e,t,a){},"./routes/ClassCreatorPage/views/CrudCreatorView.scss":function(e,t,a){},"./routes/ClassCreatorPage/views/EnumCreatorView.scss":function(e,t,a){},"./routes/ClassCreatorPage/views/ModelCreatorView.scss":function(e,t,a){},"./routes/ClassCreatorPage/views/WidgetCreatorView.scss":function(e,t,a){},"./routes/IndexPage.scss":function(e,t,a){},0:function(e,t){}},[["./GiiApplication.js","common"]]]);